There several containers, each one with a particular propose.

# Anonimizate
## Share services using tor
Dockerfile-anon is a image to desgined to share any content or service you could need using tor network. In first place \
install everything to a correct functionality with tor installed.

It was conceibed to be execute like

```
sudo docker run --name redteam_anon --rm -v "$(pwd)"/anonServices-vol:/anonServices -v "$(pwd)"/torService:/var/lib/tor/ -v "$(pwd)"/tor-conf:/etc/tor -i -t redteam/anon bash
```

And inside the container we have to go to the path '/anonServices/webServer' and exec `$python3 -m http.server 80`

After that going into the url given by the hostname file. For private use remember chance the hostname and both keys, for that you can follow the manual describe in https://null-byte.wonderhowto.com/how-to/host-your-own-tor-hidden-service-with-custom-onion-address-0180159/



## Anonimimate the traffic in the host using the tor-container
The second part of this image is to 'torify' all the traffic of the host.
In first place we're are going to torify just a terminal session with torify. For that first install torify
`sudo apt install torify`

Modify the config in /etc/tor/torsocks.conf and chage the Tor Address for the address of the container.

`#In the host we want to anonimize /etc/tor/torsocks.conf
TorAddress 172.17.0.2  #This is the ip addres of the tor container
TorPort 9100`

In the container:
#To localhost use, without this the container can't connect to tor net
SocksPort 9050
#To be from external computers. A different port imply a different tor connection. We could even play with this.
SocksPort 172.17.0.2:9100 #The Ip of the container that is runing the tor service





Execute
`. torsocks on`

For this to work remember modify the torrc file in the container

and for testing just do a:
`curl https://miip.es | html2text`


With this we have all the traffic generated by a terminal session torify but what about the rest? What if burpsuite is betraying us?
How to torify all the traffic generate by or machine IPTables rules?


For starting one of the services you would like just modify the `anonServices-vol/torrc.aux` file and after that in the container go to `/anonServices` and execute  the script `start_torServices.sh` and this will copy your custom torrc in the torrc that will be used.
